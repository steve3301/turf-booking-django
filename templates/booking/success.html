{% extends "booking/base.html" %}
{% block content %}

<div style="
  max-width:700px;
  margin:80px auto;
  padding:40px;
  background:#020617;
  border-radius:22px;
  border:1px solid #1f2937;
  color:white;
  box-shadow:0 0 40px rgba(0,0,0,0.5);
">

  <h2 style="color:#4ade80;margin-bottom:10px;">
    Booking Confirmed ✅
  </h2>

  <p style="opacity:0.8;margin-bottom:30px;">
    Please save this QR. Show it at the turf for entry.
  </p>

  <!-- QR CODE (FIXED) -->
  <div style="text-align:center;margin:30px 0;">
    <img 
      src="data:image/png;base64,{{ qr_code }}"
      alt="QR Code"
      style="
        width:220px;
        height:220px;
        background:white;
        padding:15px;
        border-radius:18px;
      "
    >
  </div>

  <!-- DOWNLOAD BUTTON -->
  <div style="text-align:center;margin-bottom:35px;">
    <a href="{% url 'download_booking_pdf' booking.booking_id %}"
       style="
         display:inline-block;
         background:linear-gradient(135deg,#22c55e,#4ade80);
         color:#020617;
         padding:14px 26px;
         border-radius:12px;
         font-weight:700;
         text-decoration:none;
       ">
      ⬇ Download QR & Booking Details
    </a>
  </div>

  <!-- BOOKING DETAILS -->
  <div style="
      background:#0f172a;
      padding:25px;
      border-radius:18px;
  ">

    <p><strong>Booking ID:</strong><br>{{ booking.booking_id }}</p>
    <p><strong>Name:</strong> {{ booking.user_name }}</p>
    <p><strong>Phone:</strong> {{ booking.phone }}</p>

    {% with booking.slots.first as first_slot %}
      <p><strong>Turf:</strong> {{ first_slot.sport.name }}</p>
      <p><strong>Date:</strong> {{ first_slot.date }}</p>
    {% endwith %}

    <hr style="margin:20px 0;border-color:#1f2937;">

    <strong>Booked Slots:</strong>
    <ul style="margin-top:10px;line-height:1.8;">
      {% for slot in booking.slots.all %}
        <li>{{ slot.display_time }}</li>
      {% endfor %}
    </ul>

  </div>

</div>

{% endblock %}
