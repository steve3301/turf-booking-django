{% extends "booking/base.html" %}
{% load static %}

{% block content %}

<div class="slots-wrapper">

  <!-- TOP HEADER -->
  <div class="slots-top">
    <h1>{{ sport.name }}</h1>
    <p>Choose your time. Lock your game.</p>
  </div>

  <!-- DATE STRIP -->
  <div class="date-strip">
    {% for d in dates %}
      <a href="?date={{ d|date:'Y-m-d' }}"
         class="date-box {% if d == selected_date %}active{% endif %}">
        <small>{{ d|date:"D" }}</small>
        <span>{{ d|date:"d" }}</span>
      </a>
    {% endfor %}
  </div>

  <!-- FILTERS -->
  <div class="slot-filters">
    <button class="filter active">All</button>
    <button class="filter">Morning</button>
    <button class="filter">Afternoon</button>
    <button class="filter">Evening</button>
  </div>

  <!-- SLOT GRID (ðŸ”¥ FIXED) -->
  <div class="slots-grid premium-grid">

    {% for slot in slots %}

      {% if slot.is_booked %}
        <div class="slot booked">
          <h4>{{ slot.start_label }} â€“ {{ slot.end_label }}</h4>
          <span class="status booked">Booked</span>
        </div>

      {% elif slot.time.hour < current_hour and selected_date == today %}
        <div class="slot expired">
          <h4>{{ slot.start_label }} â€“ {{ slot.end_label }}</h4>
          <span class="status expired">Expired</span>
        </div>

      {% else %}
        <div class="slot available" data-id="{{ slot.id }}">
          <h4>{{ slot.start_label }} â€“ {{ slot.end_label }}</h4>
          <span class="price">â‚¹{{ slot.price }}</span>
        </div>
      {% endif %}

    {% endfor %}

  </div>

</div>

{% endblock %}
